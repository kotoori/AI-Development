基本設計書（ドラフト）
1. システム概要
本システムは、複数経路（Webフォーム、電話、営業担当経由など）からの問い合わせ情報を一元的に管理するための社内向けWebアプリケーションである。
問い合わせの登録、検索、ステータス管理、履歴管理を行うことで、属人化していた顧客対応の効率化と品質向上を目的とする。
開発は Python（フレームワークは Django または Flask を想定）を使用し、社内サーバー上で運用する。
外部公開は行わず、社内ネットワークからのみ利用可能とする。
主な機能


顧客向け Web お問い合わせフォーム


社員向けログイン／管理画面


問い合わせ登録（社員による代理登録）


問い合わせ検索


ステータス管理（未対応／対応中／完了）


対応履歴（メモ）管理


ログ（ログイン／登録／ステータス変更）記録



2. 画面一覧
画面ID画面名利用者概要G01お問い合わせフォーム顧客顧客が問い合わせ内容を送信するフォームG02ログイン画面社員社員番号・パスワードでログインG03問い合わせ一覧（検索結果）社員問い合わせの検索・一覧表示G04問い合わせ詳細社員問い合わせ内容・ステータス・履歴を確認G05問い合わせ登録（社員用）社員電話あるいはメール問い合わせの代理登録G06ステータス更新画面社員状態変更・メモ追加G07管理者用ユーザー管理画面管理者社員アカウントの登録・削除G08エラー画面全ユーザーアプリ内部エラーの表示（顧客向けは内容制限）

3. 機能一覧
3.1 顧客向けお問い合わせ機能


必須項目入力チェック


個人情報保護の同意チェック


バリデーションエラー時の表示


システムエラー時の内部ログ記録


送信完了画面表示


3.2 社員ログイン機能


社員番号 + パスワードで認証


権限（一般／管理者）の判定


ログインログの記録


3.3 問い合わせ登録機能（社員用）


顧客フォームと同様の入力項目


受領経路の入力（営業直接／メール／電話）


3.4 問い合わせ検索機能


顧客名（部分一致）


日付（範囲検索）


ステータス（未対応／対応中／完了）


会社名（部分一致）


条件の AND 絞り込み


3.5 問い合わせ詳細・ステータス管理


問い合わせ内容表示


ステータス更新（履歴記録）


メモ追加（履歴として保存を想定）


3.6 管理者機能


社員アカウントの新規登録


アカウント削除


問い合わせの削除


ステータスの巻き戻し


3.7 ログ記録機能


ログインログ


問い合わせ登録ログ


ステータス変更ログ



4. 入力項目とバリデーション
4.1 顧客向けフォーム / 社員入力フォーム（共通）
項目必須種別バリデーション名前○文字列1〜100文字メールアドレス○文字列メール形式チェック件名○文字列1〜200文字本文○文字列1〜2000文字会社名任意文字列0〜100文字部署名任意文字列0〜100文字電話番号任意文字列数字ハイフン許容（10〜15桁）同意チェック○（顧客のみ）booleanチェック必須受領経路（社員入力時のみ）○選択「営業担当直接／営業担当メール／電話」

5. データベース設計（案）
5.1 テーブル一覧
テーブル名内容users社員情報inquiries問い合わせ本体inquiry_status_logsステータス変更履歴inquiry_memos（案）対応履歴（メモ）login_logsログインログinquiry_logs問い合わせ登録ログ
※ 顧客情報テーブルは未確定（確認事項に記載）

5.2 テーブル定義（案）
1. users（社員）
項目型備考idINT PK自動採番employee_noVARCHAR(20)社員番号（ログインID）nameVARCHAR(100)氏名password_hashVARCHAR(255)ハッシュ化したパスワードroleENUM('user','admin')権限

2. inquiries（問い合わせ）
項目型備考idINT PKnameVARCHAR(100)顧客名emailVARCHAR(255)subjectVARCHAR(200)件名bodyTEXT本文companyVARCHAR(100)departmentVARCHAR(100)phoneVARCHAR(20)channelENUM('web','direct','mail','phone')受領経路statusENUM('new','in_progress','done')ステータスcreated_atDATETIME問い合わせ日時updated_atDATETIME更新日時

3. inquiry_status_logs（ステータス変更履歴）
項目型備考idINT PKinquiry_idINT FKinquiries.idstatusENUM('new','in_progress','done')changed_byINT FKusers.idchanged_atDATETIME

4. inquiry_memos（対応履歴メモ） ※複数保存想定
項目型備考idINT PKinquiry_idINT FKmemoTEXTcreated_byINTcreated_atDATETIME

5. login_logs
項目型idINT PKuser_idINTlogged_in_atDATETIMEip_addressVARCHAR(50)

6. inquiry_logs
項目型idINT PKinquiry_idINTactionVARCHAR(50)user_idINTcreated_atDATETIME

6. リスク・確認すべき事項の一覧
以下は、要件定義時点で不確定または設計に大きく影響する事項。
6.1 不確定要件（確認事項）


顧客情報の扱い


会社名・部署名・電話番号を
① inquiry にそのまま保持するか
② 顧客テーブルに切り出して紐づけるか




対応履歴（メモ）の保存方式


複数件の履歴として保持するか（推奨）


1件のみの上書きにするか




社員情報の管理範囲


社員番号は既存の人事データベースが存在するか


本システムで新規登録が必要か




社員アカウント登録フロー


管理者が手動で登録する運用で問題ないか


CSV一括登録などは不要か




管理者の権限範囲


現状：問い合わせ削除／ステータス巻き戻し


他に必要な操作権限はあるか（例：ログ閲覧、社員管理）




エラー通知の扱い


開発者・管理者へのメール通知は必要か


システム監視との連携要否




6.2 リスク


顧客情報をテーブル分離するかで DB 構造が大きく変わる


対応履歴を複数保存する場合、UI設計が必要


社員情報の管理フロー不明確だと運用トラブルが発生


検索機能の複合条件が多いため、インデックス設計が必要


削除方式が物理削除のため、誤削除時の復元が困難



必要に応じて、画面遷移図やAPI仕様書のドラフトも作成できます。
次に進めるため、上記「確認事項」の回答をご提示いただければ、さらに精緻な設計書を作成可能です。Sources